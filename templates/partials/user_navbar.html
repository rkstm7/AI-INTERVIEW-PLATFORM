<link
  rel="stylesheet"
  href="{{ url_for('static', filename='css/user_navbar.css') }}"
/>
<nav class="custom-navbar">
  <div class="navbar-container">
    <!-- Brand -->
    <a href="{{ url_for('user_dashboard.dashboard') }}" class="navbar-brand">
      <img
        src="{{ url_for('static', filename='images/logo.png') }}"
        alt="AI Interview Logo"
        class="logo-img"
      />
      <span class="logo-text">AI Interview Platform</span>
    </a>

    <!-- Links -->
    <div class="nav-links">
      <a
        href="{{ url_for('user_dashboard.dashboard') }}"
        class="{% if request.endpoint == 'user_dashboard.dashboard' %}active{% endif %}"
      >
        Dashboard
      </a>
      <a
        href="{{ url_for('user_resources.resources') }}"
        class="{% if request.endpoint == 'user_resources.resources' %}active{% endif %}"
      >
        Learning Resources
      </a>
      <a
        href="{{ url_for('interview.start_interview') }}"
        class="{% if request.endpoint == 'interview.start_interview' %}active{% endif %}"
      >
        Interview Preparation
      </a>
      <a
        href="{{ url_for('scorecard.scorecard') }}"
        class="{% if request.endpoint == 'scorecard.scorecard' %}active{% endif %}"
      >
        Scorecard
      </a>

      <!-- User Facility Dropdown -->
      <div class="dropdown">
        <a href="#" class="dropdown-toggle">
          User Facility
          <i class="fas fa-caret-down"></i>
        </a>
        <ul class="dropdown-menu">
          <li>
            <a
              href="{{ url_for('feedback.manual_feedback') }}"
              class="{% if request.endpoint == 'feedback.manual_feedback' %}active{% endif %}"
            >
              Feedback
            </a>
          </li>
          <li>
            <a
              href="{{ url_for('notice.user_notice') }}"
              class="{% if request.endpoint == 'notice.user_notice' %}active{% endif %}"
            >
              Notices
            </a>
          </li>
        </ul>
      </div>

      <a
        href="{{ url_for('contact.user_contact') }}"
        class="{% if request.endpoint == 'contact.user_contact' %}active{% endif %}"
      >
        Help
      </a>

      <!-- Profile Dropdown -->
      <div class="dropdown">
        <a href="user_dashboard.dashboard" class="dropdown-toggle">
          Profile
          <i class="fas fa-caret-down"></i>
        </a>
        <ul class="dropdown-menu">
          <li>
            <a
              href="{{ url_for('user_profile.view_profile') }}"
              class="{% if request.endpoint == 'user_profile.view_profile' %}active{% endif %}"
            >
              View Profile
            </a>
          </li>
          <li>
            <a
              href="{{ url_for('user_profile.edit_profile') }}"
              class="{% if request.endpoint == 'user_profile.edit_profile' %}active{% endif %}"
            >
              Update Profile
            </a>
          </li>
          <li>
            <a href="{{ url_for('user_logout.logout') }}"> Logout </a>
          </li>
        </ul>
      </div>
    </div>

    <!-- Mobile toggle -->
    <button id="menuToggle" class="menu-toggle">
      <i class="fas fa-bars"></i>
    </button>
  </div>

  <!-- Mobile Menu -->
  <div id="mobileMenu" class="mobile-menu">
    <a
      href="{{ url_for('user_dashboard.dashboard') }}"
      class="{% if request.endpoint == 'user_dashboard.dashboard' %}active{% endif %}"
      >Dashboard</a
    >
    <a
      href="{{ url_for('user_resources.resources') }}"
      class="{% if request.endpoint == 'user_resources.resources' %}active{% endif %}"
      >Learning Resources</a
    >
    <a
      href="{{ url_for('interview.start_interview') }}"
      class="{% if request.endpoint == 'interview.start_interview' %}active{% endif %}"
      >Interview Preparation</a
    >
    <a
      href="{{ url_for('scorecard.scorecard') }}"
      class="{% if request.endpoint == 'scorecard.scorecard' %}active{% endif %}"
      >Scorecard</a
    >
    <a
      href="{{ url_for('feedback.manual_feedback') }}"
      class="{% if request.endpoint == 'feedback.manual_feedback' %}active{% endif %}"
      >Feedback</a
    >
    <a
      href="{{ url_for('notice.user_notice') }}"
      class="{% if request.endpoint == 'notice.user_notice' %}active{% endif %}"
      >Notices</a
    >
    <a
      href="{{ url_for('contact.user_contact') }}"
      class="{% if request.endpoint == 'contact.user_contact' %}active{% endif %}"
      >Help</a
    >

    <!-- Profile Dropdown in Mobile -->
    <a href="user_dashboard.dashboard" class="dropdown-toggle-mobile"
      >Profile</a
    >
    <div class="dropdown-menu-mobile">
      <a href="{{ url_for('user_profile.view_profile') }}">View Profile</a>
      <a href="{{ url_for('user_profile.edit_profile') }}">Update Profile</a>
      <a href="{{ url_for('user_logout.logout') }}">Logout</a>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const navbar = document.querySelector(".custom-navbar");
      const dropdowns = document.querySelectorAll(".dropdown");

      // Scroll effect: navbar moves to center when scrolling down
      window.addEventListener("scroll", () => {
        if (window.scrollY > 50) {
          navbar.classList.add("navbar-centered");
        } else {
          navbar.classList.remove("navbar-centered");
        }
      });

      // Dropdown hover/click
      dropdowns.forEach((dropdown) => {
        const toggle = dropdown.querySelector(".dropdown-toggle");
        const menu = dropdown.querySelector(".dropdown-menu");

        // Desktop hover
        dropdown.addEventListener("mouseenter", () => {
          dropdown.classList.add("show");
          menu.classList.add("show");
        });
        dropdown.addEventListener("mouseleave", () => {
          dropdown.classList.remove("show");
          menu.classList.remove("show");
        });

        // Mobile click
        toggle.addEventListener("click", (e) => {
          e.preventDefault();
          dropdown.classList.toggle("show");
          menu.classList.toggle("show");
        });
      });

      // Close dropdowns on outside click
      document.addEventListener("click", (e) => {
        dropdowns.forEach((dropdown) => {
          if (!dropdown.contains(e.target)) {
            dropdown.classList.remove("show");
            dropdown.querySelector(".dropdown-menu").classList.remove("show");
          }
        });
      });

      // Mobile menu toggle
      const menuToggle = document.getElementById("menuToggle");
      const mobileMenu = document.getElementById("mobileMenu");
      menuToggle.addEventListener("click", () => {
        mobileMenu.classList.toggle("show");
      });
      mobileMenu.querySelectorAll("a").forEach((link) => {
        link.addEventListener("click", () =>
          mobileMenu.classList.remove("show")
        );
      });
    });
  </script>
</nav>
